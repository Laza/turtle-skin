/* 
	Turtle skin by Laszlo Molnar
	(C) 2011
*/
var DEBUG=!1,UNDEF="undefined",OBJECT="object",NOLINK="javascript:void(0)",SHOCKWAVE_FLASH="Shockwave Flash",SHOCKWAVE_FLASH_AX="ShockwaveFlash.ShockwaveFlash",FLASH_MIME_TYPE="application/x-shockwave-flash";String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")};String.prototype.startsWith=function(b){return 0===this.indexOf(b)};String.prototype.endsWith=function(b){return this.substring(this.length-b.length)===b};
String.prototype.getExt=function(){var b=this.lastIndexOf(".");return 0>=b||b>=this.length-1?"":this.substring(b+1).toLowerCase()};var htmlregex=[[/<br>/gi,"\n"],[/\&amp;/gi,"&"],[/\&lt;/gi,"<"],[/\&gt;/gi,">"],[/\&(m|n)dash;/gi,"-"],[/\&apos;/gi,"'"],[/\&quot;/gi,'"']];String.prototype.cleanupHTML=function(){for(var b=this,i=htmlregex.length-1;0<=i;i--)b=b.replace(htmlregex[i][0],htmlregex[i][1]);return b};String.prototype.stripHTML=function(){return this.replace(/<\/?[^>]+>/gi,"")};
String.prototype.stripQuote=function(){return this.replace(/\"/gi,"&quot;")};String.prototype.appendSep=function(b,i){return(this.length?this+(i||" &middot; "):"")+b};String.prototype.rgb2hex=function(){if("#"===this.charAt(0))return this;for(var b,i=this.match(/\d+/g),m="",k=0;k<i.length&&3>k;k++)b=parseInt(i[k]).toString(16),m+=(2>b.length?"0":"")+b;return"#"+m};
String.prototype.template=function(b){if(!b)return this;for(var i=this,m=0;m<b.length;m++)i=i.replace(RegExp("\\{"+m+"\\}","gi"),b[m]);return i};Math.minMax=function(b,i,m){return $.isNumeric(i)?i<b?b:i>m?m:i:b};var _logel,_logover=!1,_lastlog,_lastcnt=1;
log=function(b){DEBUG&&!_logover&&(_logel||(_logel=$('<div id="log" style="position:fixed;left:0;top:0;width:200px;bottom:0;overflow:auto;padding:10px;background-color:rgba(0,0,0,0.5);color:#fff;font-size:15px;z-index:99999"></div>').hover(function(){_logover=!0},function(){_logover=!1}).appendTo("body")),b===_lastlog?_logel.children(":first").empty().html(_lastlog+" ("+ ++_lastcnt+")"):($('<div style="height:2em;overflow:hidden;">'+b+"</div>").prependTo(_logel),_lastlog=b,_lastcnt=1))};
checkFlash=function(b){var i=navigator,m=[1,0,0],k,b=b?b.split("."):[0,0,0];if(typeof i.plugins!=UNDEF&&typeof i.plugins[SHOCKWAVE_FLASH]==OBJECT){if((k=i.plugins[SHOCKWAVE_FLASH].description)&&!(typeof i.mimeTypes!=UNDEF&&i.mimeTypes[FLASH_MIME_TYPE]&&!i.mimeTypes[FLASH_MIME_TYPE].enabledPlugin))k=k.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),m[0]=parseInt(k.replace(/^(.*)\..*$/,"$1"),10),m[1]=parseInt(k.replace(/^.*\.(.*)\s.*$/,"$1"),10),m[2]=/[a-zA-Z]/.test(k)?parseInt(k.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),
10):0}else if(typeof window.ActiveXObject!=UNDEF)try{var u=new ActiveXObject(SHOCKWAVE_FLASH_AX);if(u&&typeof u.GetVariable!=UNDEF&&(k=u.GetVariable("$version")))k=k.split(" ")[1].split(","),m[0]=parseInt(k[0],10),m[1]=parseInt(k[1],10),m[2]=parseInt(k[2],10)}catch(B){}return m[0]>b[0]||m[0]==b[0]&&m[1]>b[1]||m[0]==b[0]&&m[1]==b[1]&&m[2]>=b[2]};
typeof Search!==UNDEF&&(Search.start=function(b){var i=$(b).find("input[type=search]").val().trim(),m=$("<div>",{"class":"searchresults"}),k=0,u,B,y,M,V,a;if(Search.data&&$.isArray(Search.data)&&Search.data.length&&i&&!(2>i.length)){m.append($("<h4>",{html:Search.text.title+" &quot;<b>"+i+"</b>&quot;"}));i=i.toLowerCase();for(u=0;u<Search.data.length;u++)for(B=0;B<Search.data[u][1].length;B++)-1!=Search.data[u][1][B].toLowerCase().indexOf(i)&&(a=Search.data[u][1][B].split(Search.sep),V=Search.rootPath&&
"."!==Search.rootPath?Search.rootPath+"/":"",M=V+(Search.data[u][0]?Search.data[u][0]+"/":""),y=$("<a>",{href:M+(a[0].startsWith("#")?Search.indexName:"")+a[0]}).appendTo(m),y.append($("<aside>").append($("<img>",{src:a[0].startsWith("#")?a[0].toLowerCase().match(/.+\.(jpg|png)$/)?M+"thumbs/"+a[0].substr(1):V+"res/unknown.png":M+Search.folderThumb}))),y.append($("<h5>",{text:a[1]})),y.append($("<p>",{text:a[2]})),k++);$(b).parents(".hint:first").fadeOut(100,function(){$(this).remove()});k?setTimeout(function(){m.find("a:first").focus()},
250):m.append($("<p>",{text:Search.text.notFound}));m.alertBox([{t:Search.text.close}],{width:400});return!1}});
(function(b){b.fn.logEvents=function(a){var d=a||"mousedown mouseup mouseover mouseout mousewheel dragstart click blur focus, load unload reset submit change abort cut copy paste selection drag drop orientationchange touchstart touchmove touchend touchcancel gesturestart gesturechange gestureend";return this.each(function(){b(this).on(d,function(a){"log"!==a.target.id&&log(a.type+' <span style="padding:0 4px;font-size:0.8em;background-color:#000;border-radius:4px;"><b>'+a.target.nodeName.toLowerCase()+
"</b>"+(a.target.id?":"+a.target.id:"")+"</span>"+(a.relatedTarget?' <span style="padding:0 4px;font-size:0.8em;background-color:#800;border-radius:4px;"><b>'+a.relatedTarget.nodeName.toLowerCase()+"</b>"+(a.relatedTarget.id?":"+a.relatedTarget.id:"")+"</span>":""));return!0})})};b.fn.trackCss=function(a,d,c){var c=c||20,h=new Date;return this.each(function(){var g=b(this),f=function(a){var b=new Date-h;log(b+"&nbsp;::&nbsp;"+a+" = "+g.css(a));b>d&&clearInterval(j)},j=setInterval(function(){if(b.isArray(a))for(var d=
0;d<a.length;d++)f(a[d]);else f(a)},c)})};b.fn.readData=function(a,d){if(null==a||null==d)return this;var d=d.split(","),c,h=d.length,g;return this.each(function(){for(c=0;c<h;c++)if(null!=(g=b(this).data(d[c])))a[d[c]]=g})};b.extend(b.support,{orientation:"orientation"in window,touch:"ontouchend"in document,cssTransitions:"WebKitTransitionEvent"in window,cssTable:!b.browser.msie||8<=b.browser.version,cssFilter:b.browser.msie&&8>=b.browser.version,flash:checkFlash("9.0.0")});b.extend(jQuery.easing,
{easeOutBack:function(a,b,c,h,g,f){null==f&&(f=1.70158);return h*((b=b/g-1)*b*((f+1)*b+f)+1)+c},easeOutCubic:function(a,b,c,h,g){return h*((b=b/g-1)*b*b+1)+c}});b.fn.showin=function(){return this.each(function(){b(this).css("display","inline-block")})};b.fn.getDim=function(){var a=b(this).eq(0),d={width:a.width(),height:a.height()};if((0===d.width||0===d.height)&&"none"===a.css("display")){var c=a.css("position"),h=a.css("left");a.css({position:"absolute",left:"-10000px",display:"block"});d.width=
a.width();d.height=a.height();a.css({display:"none",position:c,left:h})}return d};var i=["DOMMouseScroll","mousewheel"];if(b.event.fixHooks)for(var m=i.length;m;)b.event.fixHooks[i[--m]]=b.event.mouseHooks;b.event.special.mousewheel={setup:function(){if(this.addEventListener)for(var a=i.length;a;)this.addEventListener(i[--a],k,!1);else this.onmousewheel=k},teardown:function(){if(this.removeEventListener)for(var a=i.length;a;)this.removeEventListener(i[--a],k,!1);else this.onmousewheel=null}};b.fn.extend({mousewheel:function(a){return a?
this.bind("mousewheel",a):this.trigger("mousewheel")},unmousewheel:function(a){return this.unbind("mousewheel",a)}});var k=function(a){var d=a||window.event,c=[].slice.call(arguments,1),h=0,g=0,f=0,a=b.event.fix(d);a.type="mousewheel";d.wheelDelta?h=d.wheelDelta/120:d.detail&&(h=-d.detail/3);f=h;void 0!==d.axis&&d.axis===d.HORIZONTAL_AXIS&&(f=0,g=-1*h);void 0!==d.wheelDeltaY&&(f=d.wheelDeltaY/120);void 0!==d.wheelDeltaX&&(g=-1*d.wheelDeltaX/120);c.unshift(a,h,g,f);return(b.event.dispatch||b.event.handle).apply(this,
c)},u=function(a,b,c){if(1<arguments.length&&/^(string|number|boolean)$/.test(typeof b)){var h=new Date;h.setTime(h.getTime()+36E5*("number"!==typeof c?1:c));document.cookie=encodeURIComponent(a)+"="+(""+b)+"; expires="+h.toGMTString()+"; path=/";return b}if(a)for(var a=a+"=",h=document.cookie.split(";"),g,f=0;f<h.length;f++)if(g=h[f].trim(),0===g.indexOf(a))return g=g.substring(a.length),/^(true|yes)$/.test(g)?!0:/^(false|no)$/.test(g)?!1:/^([\d.]+)$/.test(g)?parseFloat(g):g;return null};(function(){function a(a){function c(a){var d=
RegExp(b.map(a,encodeURIComponent).join("|"),"ig");return function(a){return a.replace(d,decodeURIComponent)}}a=b.extend({unescape:!1},a||{});d.encoder=function(a){return!0===a?function(a){return a}:"string"==typeof a&&(a=c(a.split("")))||"function"==typeof a?function(b){return a(encodeURIComponent(b))}:encodeURIComponent}(a.unescape)}var d={put:function(a,b){(b||window).location.hash=this.encoder(a)},get:function(a){a=(a||window).location.hash.replace(/^#/,"");try{return b.browser.mozilla?a:decodeURIComponent(a)}catch(c){return a}},
encoder:encodeURIComponent},c={id:"__jQuery_history",init:function(){var a='<iframe id="'+this.id+'" style="display:none" src="javascript:false;" />';b("body").prepend(a);return this},_document:function(){return b("#"+this.id)[0].contentWindow.document},put:function(a){var b=this._document();b.open();b.close();d.put(a,b)},get:function(){return d.get(this._document())}},h={base:{callback:void 0,type:void 0,check:function(){},load:function(){},init:function(b,c){a(c);g.callback=b;g._options=c;g._init()},
_init:function(){},_options:{}},timer:{_appState:void 0,_init:function(){var a=d.get();g._appState=a;g.callback(a);setInterval(g.check,100)},check:function(){var a=d.get();a!=g._appState&&(g._appState=a,g.callback(a))},load:function(a){a!=g._appState&&(d.put(a),g._appState=a,g.callback(a))}},iframeTimer:{_appState:void 0,_init:function(){var a=d.get();g._appState=a;c.init().put(a);g.callback(a);setInterval(g.check,100)},check:function(){var a=c.get(),b=d.get();b!=a&&(b==g._appState?(g._appState=a,
d.put(a),g.callback(a)):(g._appState=b,c.put(b),g.callback(b)))},load:function(a){a!=g._appState&&(d.put(a),c.put(a),g._appState=a,g.callback(a))}},hashchangeEvent:{_init:function(){g.callback(d.get());b(window).on("hashchange",g.check)},check:function(){g.callback(d.get())},load:function(a){d.put(a)}}},g=b.extend({},h.base);g.type=b.browser.msie&&(8>b.browser.version||8>document.documentMode)?"iframeTimer":"onhashchange"in window?"hashchangeEvent":"timer";b.extend(g,h[g.type]);b.history=g})();b.fn.addScroll=
function(a){a=b.extend({},b.fn.addScroll.defaults,a);return this.each(function(){var d,c=b(this),h=b(this).parent(),g,f,j,p,O,n,r,w,v=0,C,i,m,G,W,k;c.css({position:"absolute",width:h.width-20});h.css({overflow:"hidden"});"absolute"!==h.css("position")&&h.css({position:"relative"});g=b("<div>",{"class":a.upbtn}).appendTo(h);f=b("<div>",{"class":a.dnbtn}).appendTo(h);j=b("<div>",{"class":a.scbar}).appendTo(h);p=b("<div>").appendTo(j);O=g.add(f).add(j);O.hide();var x=function(){return c.position().top},
u=function(a){return Math.round((j.height()-6)*-(null==a?x():a)/n)+3},H=function(){return Math.max(Math.round((j.height()-6)*r/n),a.dragMinSize)},I=function(b){null==b&&(b=x());g.css({opacity:b?1:a.disabledOpacity});f.css({opacity:b===r-n?a.disabledOpacity:1})},J=function(){return!1},K=function(){n=c.height();r=h.height();n<=r?(c.css({top:0}).off("selectstart",J),O.hide()):(c.position().top<r-n&&c.css({top:r-n}),p.css({top:u(),height:H()}),c.on("selectstart",J),O.show(),I())},F=function(b){clearInterval(w);
r>=n||(b=Math.minMax(r-n,b,0),p.stop(!0,!0).animate({top:u(b)},a.speed,a.effect),c.stop(!0,!0).animate({top:b},a.speed,a.effect,function(){I(b)}))};g.click(function(){F(x()+r);return!1});f.click(function(){F(x()-r);return!1});j.click(function(a){a.pageY<p.offset().top?F(x()+r):a.pageY>p.offset().top+p.height()&&F(x()-r);return!1});a.enableMouseWheel&&c.mousewheel(function(b,c){c&&F(x()+a.wheelIncr*(0>c?-1:1));return!1});var y=function(a){p.css({top:Math.minMax(2,Math.round(a.pageY-p.data("my")),j.height()-
p.height()-2)});c.css({top:Math.minMax(r-n,-Math.round((p.position().top-3)*n/(j.height()-6)),0)});I();return!1},B=function(){b(document).off("mousemove",y).off("mouseup",B);return!1};p.on("mousedown",function(a){b(this).data("my",Math.round(a.pageY)-b(this).position().top);b(document).on({mousemove:y,mouseup:B});return!1});var R=function(a){return v=a.touches&&0<a.touches.length?a.touches[0].clientY:a.clientY?a.clientY:v},L=function(){W+=Math.round(G/20);var a=m+W;0<a||a<k?clearInterval(w):(c.css({top:a}),
p.css({top:u(),height:H()}),G*=0.8,10>Math.abs(G)&&(G=0,clearInterval(w)))},S=function(a){if(i){if(a=R(a)-i)c.data("dragOn",!0),c.css({top:Math.minMax(k,C+a,0)}),p.css({top:u(),height:H()})}else i=R(a);return!1},T=function(a){m=x();var a=R(a)-i,d=(new Date).getTime()-tT;G=1E3*a/d;w=setInterval(L,50);b.support.touch?this.ontouchend=this.ontouchmove=null:b(document).off({mousemove:S,mouseup:T});setTimeout(function(){c.data("dragOn",!1)},20);return 4>Math.abs(a)&&300>d},U=function(a){if(r>=n||("touchstart"===
a.type||"touchmove"===a.type)&&(!a.touches||1<a.touches.length||c.is(":animated")))return!0;clearInterval(w);te=a;C=x();i=R(a);tT=(new Date).getTime();W=0;k=r-n;if(b.support.touch)return b(a.target).closest("a").focus(),this.ontouchmove=S,this.ontouchend=T,!0;b(document).on({mousemove:S,mouseup:T});return!1};if(b.support.touch)c[0].ontouchstart=U;else c.on("mousedown",U);b(window).resize(function(){clearTimeout(d);d=setTimeout(K,50)});d=setTimeout(K,10);c.attr("role","scroll").data("dragOn",!1).on("adjust",
K);O.on("selectstart",J);(b.isFunction(a.enableKeyboard)||a.enableKeyboard)&&b(document).keydown(function(c){if(document.activeElement&&"INPUT"===document.activeElement.nodeName||b.isFunction(a.enableKeyboard)&&!a.enableKeyboard())return!0;switch(c?c.keyCode:window.event.keyCode){case 33:return F(x()+r),!1;case 34:return F(x()-r),!1}return!0})})};b.fn.addScroll.defaults={upbtn:"scrup",dnbtn:"scrdn",scbar:"scrbar",dragMinSize:10,speed:250,effect:"easeOutBack",disabledOpacity:0.3,wheelIncr:50,enableKeyboard:!0,
enableMouseWheel:!0};b.fn.scrollThumbs=function(a){a=b.extend({},b.fn.scrollThumbs.defaults,a);return this.each(function(){var d=b(this),c=b(this).parent(),h=0,g,f,j,p,i,n,r,w,v=b("<div>",{"class":a.scleft}).insertAfter(c),C=b("<div>",{"class":a.scright}).insertAfter(c),m=function(b){b=null==b?d.position().left:b;v.css({opacity:0>b?1:a.disabledOpacity});C.css({opacity:c.width()<b+d.width()?1:a.disabledOpacity})},k=function(g){var f=c.width(),h=d.width();f&&h&&!(f>=h)&&b.isNumeric(g)&&(0<g?g=0:g<f-
h&&(g=f-h),m(g),d.stop(!0,!1).animate({left:g},a.speed,a.effect))};v.click(function(){k(d.position().left+c.width());return!1});C.click(function(){k(d.position().left-c.width());return!1});d.find("a").on("setactive",function(){var g=b(this).parent()===d?b(this):b(this).parent(),f=g.position().left,g=g.outerWidth(!0),h=Math.round(g*a.headRoom),v=d.position().left,r=c.width();d.find("a.active").removeClass("active");b(this).addClass("active");if(!(r>d.width())){if(f>r-g-h-v)v=Math.max(r-g-h-f,r-d.width());
else if(f<-v+h)v=-f+h;else return;k(v)}});a.enableMouseWheel&&d.mousewheel(function(a,b){b&&k(d.position().left+c.width()*(0>b?-1:1));return!1});m();var G=function(a){return h=a.touches&&0<a.touches.length?a.touches[0].clientX:a.clientX?a.clientX:h},W=function(){n+=Math.round(i/20);var a=p+n;0<a||a<r?clearInterval(w):(d.css({left:a}),i*=0.8,10>Math.abs(i)&&(i=0,clearInterval(w)))},u=function(a){if(f){if(a=G(a)-f)d.data("dragOn",!0),d.css({left:Math.minMax(r,g+a,0)})}else f=G(a);return!1},x=function(a){p=
d.position().left;var a=G(a)-f,c=(new Date).getTime()-j;i=1E3*a/c;w=setInterval(W,50);b.support.touch?this.ontouchend=this.ontouchmove=null:b(document).off({mousemove:u,mouseup:x});setTimeout(function(){d.data("dragOn",!1)},20);return 4>Math.abs(a)&&300>c},y=function(a){if(("touchstart"===a.type||"touchmove"===a.type)&&(!a.touches||1<a.touches.length||d.is(":animated")))return!0;clearInterval(w);te=a;g=d.position().left;f=G(a);j=(new Date).getTime();n=0;r=c.width()-d.width();if(b.support.touch)return b(a.target).closest("a").focus(),
this.ontouchmove=u,this.ontouchend=x,!0;b(document).on({mousemove:u,mouseup:x});return!1};if(b.support.touch)d[0].ontouchstart=y;else d.on("mousedown",y);d.attr("role","scroll").data("dragOn",!1);d.add(v).add(C).on("selectstart",function(a){a.preventDefault();return!1})})};b.fn.scrollThumbs.defaults={scleft:"scleft",scright:"scright",speed:1500,incr:100,effect:"easeOutBack",headRoom:0.67,disabledOpacity:0.3,enableMouseWheel:!0};b.fn.addSwipe=function(a,d){return this.each(function(){var c=b(this),
h=0,g=0,f=0,j,p,i;c.attr("draggable","true");var n=function(a){return h=a.touches&&0<a.touches.length?a.touches[0].clientX:a.clientX?a.clientX:h},r=function(a){g=n(a)},w=function(a){g?c.css({left:n(a)-g+j}):g=n(a);return!1},v=function(){return!1},C=function(h){f=c.position().left;h=n(h)-g;b.support.touch?this.ontouchend=this.ontouchmove=null:b(document).off("mousemove",w).off("mouseup click",C);40<Math.abs(h)?(i=1E3*h/((new Date).getTime()-p),c.animate({left:f+Math.round(i/2)},500,"easeOutCubic"),
0>h?b.isFunction(a)&&a.call():b.isFunction(d)&&d.call()):(c.animate({left:j},200),c.trigger("click"));return!1},m=function(a){if(("touchstart"===a.type||"touchmove"===a.type)&&(!a.touches||1<a.touches.length||c.is(":animated")))return!0;r(a);k(a)},k=function(a){c.stop(!0,!1);j=c.position().left;p=(new Date).getTime();if(b.support.touch)return this.ontouchmove=w,this.ontouchend=C,!0;c.off("click");c.click(v);b(document).on({mousemove:w,mouseup:C});a.cancelBubble=!0;return!1};if(b.support.touch)this.ontouchstart=
m;else c.on({dragstart:k,mousedown:r});c.on("dragcancel",function(){c.stop(!0,!1).animate({left:j},200);return!1});c.on("unswipe",function(){b.support.touch?this.ontouchstart=this.ontouchend=this.ontouchmove=null:(b.isFunction(c.noAction)&&c.off(v),b.isFunction(c.dragStart)&&c.off(k),b(document).off("mousemove",w).off("mouseup",C))});c.on("selectstart",v)})};var B=ALIGN_TOP=0,y=ALIGN_MIDDLE=1,M=ALIGN_BOTTOM=2;b.fn.alignTo=function(a,d){d=b.extend({},b.fn.alignTo.defaults,d);"string"===typeof a&&(a=
b(a));if(a instanceof b&&a.length){var c=a.offset(),h=a.outerWidth(),g=a.outerHeight();return b(this).each(function(){var f=b(this).outerWidth(),j=b(this).outerHeight(),p=Math.round(c.left+d.toX*h/2+(d.toX-1)*d.gap);ry=Math.round(c.top+d.toY*g/2+(d.toY-1)*d.gap);l=Math.round(p-d.posX*f/2);t=Math.round(ry-d.posY*j/2);0>t?d.toX!==y?t=0:d.toY!==ALIGN_BOTTOM&&(t=c.top+a.outerHeight()+d.gap):t+j>b(window).height()&&(d.toX!==y?t=b(window).height()-j:d.toY!==ALIGN_TOP&&(t=c.top-j-d.gap));0>l?d.toY!==ALIGN_MIDDLE?
l=0:d.toX!=M&&(l=c.left+a.outerWidth()+d.gap):l+f>b(window).width()&&(d.toY!==ALIGN_MIDDLE?l=b(window).width()-f:d.toX!=B&&(l=c.left-f-d.gap));b(this).css({position:"absolute",left:l,top:t})})}};b.fn.alignTo.defaults={gap:5,posX:y,posY:ALIGN_BOTTOM,toX:y,toY:ALIGN_TOP};b.fn.addHint=function(a,d){a&&"string"!==typeof a&&!a.jquery&&(d=a,a=null);var d=b.extend({},b.fn.addHint.defaults,d),c=function(){var a=b("#"+d.id);a.length||(a=b("<div>",{"class":d.id,id:d.id}).hide().appendTo("body"));return a};
return this.each(function(){var h=b(this),g=a||h.attr("title"),f,j=!1,p=!1,i=!(g&&g.jquery),n;if(g&&g.length){var r=function(){i?(n=c(),n.empty().html(g)):n=g.show();n.off("mouseover",a);n.off("mouseout",r);var a=function(){f=clearTimeout(f);j=!0;n.stop(!0,!0).css({opacity:1}).show()},r=function(){p||(f=clearTimeout(f),j=!1,v())};n.on("mouseover",a);n.on("mouseout",r);n.find("input").focus(function(){p=!0;a()}).blur(function(){p=!1});n.stop(!0,!0).alignTo(h,{posX:d.posX,posY:d.posY,toX:d.toX,toY:d.toY});
n.css({opacity:0}).show().animate({opacity:1},200);b.support.touch?f=setTimeout(v,d.stay):j=!0},w=function(){j=!1;f=clearTimeout(f);v()},v=function(){!j&&n&&n.length&&n.stop(!0,!1).animate({opacity:0},200,function(){b(this).hide()})};g.jquery?g.addClass(d.id):h.removeAttr("title");h.on(b.support.touch?{touchstart:r}:{"focus mouseenter":r,"blur mouseleave":w})}})};b.fn.addHint.defaults={id:"hint",stay:3E3,posX:y,posY:ALIGN_BOTTOM,toX:y,toY:ALIGN_TOP};b.fn.popupBox=function(a){a=b.extend({},b.fn.popupBox.defaults,
a);b("#"+a.id).remove();var d,c=b("<div>",{id:a.id}).appendTo("body"),h=b("<div>",{"class":"panel"}).appendTo(c);h.css({width:a.width}).append(this);var g=function(){c.fadeOut(250,function(){b(this).remove()})};c.fadeIn(250,function(){d=setTimeout(g,a.length)});h.css({marginTop:Math.max(Math.round(0.4*(b(window).height()-h.outerHeight())),0)}).hover(function(){d=clearTimeout(d);b(this).stop(!0,!1).css("opacity",1)},function(){d=setTimeout(g,a.length)});return this};b.fn.popupBox.defaults={id:"modal",
width:200,length:500};b.fn.alertBox=function(a,d){b.isArray(a)||(d=a,a=null);d=b.extend({},b.fn.alertBox.defaults,d);b("#"+d.id).remove();var c=b("<div>",{id:d.id}).appendTo("body"),h=b("<div>",{"class":"panel"}).appendTo(c),g,f;h.append(this);h.append(b("<a>",{"class":"close",href:NOLINK,text:" "}).click(function(){p();return!1}));a&&(g=b("<div>",{"class":"buttons"}).appendTo(h));h.css({width:d.width});var j=function(a){if(document.activeElement&&"input"===document.activeElement.nodeName||b.isFunction(d.enableKeyboard)&&
!d.enableKeyboard())return!0;var c=a?a.keyCode:window.event.keyCode;if(27===a)p();else if(g){var a=g.find("a.active"),h=f.index(a);switch(c){case 13:case 10:if(b.isFunction(a[0].handler))return a[0].handler.call(),p(),!1;case 39:return i((h+1)%f.length),!1;case 37:return i(h?h-1:f.length-1),!1}}return!0},p=function(){b(document).off("keydown",j);c.fadeOut(250,function(){b(this).remove()})},i=function(a){f.each(function(c){b(this).toggleClass("active",c===a)})};if(a&&a.length){for(var n,r=0;r<a.length;r++)r&&
g.append(" "),n=b("<a>",{href:NOLINK}).appendTo(g),n.html(a[r].t),b.isFunction(a[r].h)&&(n[0].handler=a[r].h),n.click(function(){null!=this.handler&&this.handler.call();p();return!1});f=g.children("a");f.last().addClass("active")}(b.isFunction(d.enableKeyboard)||d.enableKeyboard)&&b(document).keydown(j);c.fadeIn(250);h.css({marginTop:Math.max(Math.round(0.4*(b(window).height()-h.outerHeight())),0)});return this};b.fn.alertBox.defaults={id:"modal",width:420,enableKeyboard:!0};b.fn.equalHeight=function(){var a,
d,c=0,h=0,g;return 2>(g=b(this).length)?this:this.each(function(f){a=b(this);a.offset().top===c?(d=d?d.add(a):a,h=Math.max(h,a.height()),f===g-1&&h&&d.height(h)):(d&&h&&d.height(h),d=a,h=a.height(),c=a.offset().top)})};b.fn.shareIt=function(a){var a=b.extend({},b.fn.shareIt.defaults,a),d=encodeURIComponent(a.useHash?window.location.href:window.location.href.split("#")[0]),c=encodeURIComponent(b("meta[name=title]").attr("content")||b("title").text()),h=encodeURIComponent(a.callTxt);encodeURIComponent(b("link[rel=img_src]").attr("href"));
return this.each(function(){var g=b(this);"a"===this.nodeName&&g.attr("href",NOLINK);var f=b("<div>",{"class":a.id}).hide();if(location.protocol.startsWith("file:")&&!DEBUG)f.html(a.localWarning);else{a.facebookLike&&f.append('<div class="likebtn"><iframe src="http://www.facebook.com/plugins/like.php?href='+d+"&amp;layout=button_count&amp;show_faces=false&amp;width=110&amp;action=like&amp;font=arial&amp;colorscheme="+a.likeBtnTheme+'&amp;height=20" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:110px; height:20px;" allowTransparency="true"></iframe></div>');
a.twitterTweet&&f.append('<div class="likebtn"><iframe allowtransparency="true" frameborder="0" scrolling="no" src="http://platform.twitter.com/widgets/tweet_button.html?url='+d+"&text="+c+'" style="width:55px; height:20px;"></iframe></div>');if(a.googlePlus&&gapi&&!a.useHash){var j=b('<div class="g-plusone likebtn" data-size="medium" data-annotation="inline" data-href="'+d+'" data-width="110"></div>').appendTo(f);gapi.plusone.render(j[0])}a.tumblrBtn&&f.append('<div class="likebtn" id="tumblr"><a href="http://www.tumblr.com/share/photo?source='+
d+"&caption="+c+'" title="Share on Tumblr" style="display:inline-block; text-indent:-9999px; overflow:hidden; width:81px; height:20px; background:url(http://platform.tumblr.com/v1/share_1.png) top left no-repeat transparent;">Tumblr</div>');a.facebook&&f.append('<a href="http://www.facebook.com/sharer.php?u='+d+"&t="+c+'" class="facebook">Facebook</a>');a.twitter&&f.append('<a href="http://twitter.com/home?status='+h+": "+d+'" class="twitter">Twitter</a>');a.digg&&f.append('<a href="http://digg.com/submit?url='+
d+'" class="digg">Digg</a>');a.delicious&&f.append('<a href="http://delicious.com/save?url='+d+"&title="+c+'&v=5" class="delicious">Delicious</a>');a.myspace&&f.append('<a href="http://www.myspace.com/index.cfm?fuseaction=postto&t='+c+"&u="+d+'&l=3" class="myspace">MySpace</a>');a.stumbleupon&&f.append('<a href="http://www.stumbleupon.com/submit?url='+d+"&title="+c+'" class="stumbleupon">StumbleUpon</a>');a.reddit&&f.append('<a href="http://www.reddit.com/submit?url='+d+'" class="reddit">Reddit</a>');
f.children("a").attr("target","_blank");a.email&&f.append('<a href="mailto:?subject='+h+"&body="+c+"%0D%0A"+d+'" class="email">Email</a>')}g.addHint(f.appendTo("body"),a.pos).on("destroy",function(){f.remove()})})};b.fn.shareIt.defaults={id:"shares",useHash:!0,likeBtnTheme:"light",facebookLike:!0,twitterTweet:!0,googlePlus:!0,tumblrBtn:!0,facebook:!0,twitter:!0,digg:!0,delicious:!0,myspace:!0,stumbleupon:!0,reddit:!0,email:!0,callTxt:"Found this page",pos:{posX:1,posY:2,toX:1,toY:0},localWarning:"Can't share local albums. Please upload your album first!"};
b.fn.addPlayer=function(a){var a=b.extend({},b.fn.addPlayer.defaults,a),d={flashVideo:".flv.3gp.3g2",video:".mp4.mov.f4v",html5Video:".ogv.webm",qtVideo:".qt.mpg.mpeg.mpe",wmVideo:".avi.wmv.asf.asx.wvx.mkv",audio:".mp3.aac.m4a",html5audio:".ogg.wav.ram.rm"},c=0,h=a.resPath?a.resPath+"/":"",g=function(a){var b="",c;for(c in a)b+='<param name="'+c+'" value="'+a[c]+'">';return b},f=function(a){var c=b(a.target);c&&(b.browser.msie?(c.hide(),function(){if(4==c.readyState){if(c){for(var a in c)"function"===
typeof c[a]&&(c[a]=null);c.remove()}}else setTimeout(arguments.callee,10)}()):c.remove())},j=function(d,f,v,j,n,i){var p="media"+c++,m=a.swf===b.fn.addPlayer.defaults.swf?24:0;d.addClass("flplayer").css({width:v,height:j+m});f="netstreambasepath="+encodeURIComponent(window.location.href.split("#")[0])+"&id="+p+"&file="+encodeURIComponent(f)+"&image="+encodeURIComponent(n)+(i&&i.length?"&folder="+encodeURIComponent(i):"")+"&autostart="+a.auto+"&loop="+a.loop+"&screencolor="+encodeURIComponent(a.bgcolor)+
"&controlbar.position=bottom";p='<object id="'+p+'" name="'+p+'" width="100%" height="100%" bgcolor="'+a.bgcolor+'" tabindex="0" ';p=b.browser.msie?p+'classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000">'+g({movie:h+a.swf}):p+('type="application/x-shockwave-flash" data="'+h+a.swf+'">');p+=g({allowfullscreen:!0,allowscriptaccess:"always",seamlesstabbing:!0,wmode:"opaque",flashvars:f});return b(p).appendTo(d)},p=function(d,g,f,h){var j="em"+c++;d.addClass("emplayer");return b('<embed class="otherplayer" id="'+
j+'" src="'+g+'" autostart="'+a.auto+'" loop="'+a.loop+'" width="'+f+'" height="'+h+'">').appendTo(d)},i=function(d,g,f,h,j,i){if((i=i!==UNDEF&&i)&&!Modernizr.audio||!i&&!Modernizr.video)return p(d,g,f,h);d.addClass("h5player").css({width:f,height:h+m});var n="ht"+c++,m=30,d=b(i?"<audio>":"<video>",{id:n,src:g,width:f,height:h,controls:!0,preload:"auto",poster:j,autoplay:a.auto,loop:a.loop}).appendTo(d);if(b.isFunction(a.complete))d.on("ended",a.complete);return d},n=function(d,f,h,j){var i="wm"+
c++;d.addClass("wmplayer").css({width:h,height:j+64});h='<object id="'+i+'" width="'+h+'" height="'+(j+64)+'" '+(b.browser.msie?'classid="CLSID:6BF52A52-394A-11D3-B153-00C04F79FAA6">':'type="application/x-ms-wmp" data="'+f+'">');h+=g({URL:f,SendPlayStateChangeEvents:!0,AutoStart:a.auto,StretchToFit:a.fit});b.browser.msie||(h+="<a></a>");el=b(h).appendTo(d);if(b.isFunction(a.complete))el.on("playStateChange",function(){a.complete.call(this)});return el};return this.each(function(){var h=b(this),m=
null;h.readData(a,"file,folder,width,height,poster");if(a.file){var v;a:{v=a.file.getExt();if(v.length)for(var C in d)if(0<=d[C].indexOf(v)){v=C;break a}v=null}switch(v){case "flashVideo":if(!b.support.flash){h.append(a.flashInstall);break}case "video":if(b.support.flash){m=j(h,a.file,a.width,a.height,a.poster);break}case "html5Video":m=i(h,a.file,a.width,a.height,a.poster);break;case "qtVideo":m=a.file;v=a.width;C=a.height;var k="qt"+c++;h.addClass("qtplayer").css({width:v,height:C+16});v='<object id="'+
k+'" width="'+v+'" height="'+(C+16)+'" '+(b.browser.msie?'classid="clsid:02BF25D5-8C17-4B23-BC80-D3488ABDDC6B" codebase="http://www.apple.com/qtactivex/qtplugin.cab#version=6,0,2,0">':'type="video/quicktime" data="'+m+'">');v+=g({src:m,autoplay:a.auto,scale:a.fit?"tofit":"1",enablejavascript:!0,postdomevents:!0});h=b(v).appendTo(h);if(b.isFunction(a.complete))h.on("qt_ended",a.complete);m=h;break;case "wmVideo":m=n(h,a.file,a.width,a.height);break;case "audio":if(b.support.flash){m=j(h,a.file,a.width,
a.height,a.poster,a.folder);break}case "html5audio":m=i(h,a.file,a.width,a.height,a.poster,!0);break;default:m=p(h,a.file,a.width,a.height)}m.on("destroy",f)}})};b.fn.addPlayer.defaults={complete:null,swf:"player.swf",width:640,height:480,bgcolor:"#000000",auto:!1,loop:!1,fit:!0,poster:"",folder:"",flashInstall:'<a href="http://get.adobe.com/flashplayer/">Get Adobe Flash Player!</a>'};b.fn.centerThis=function(a){a=b.extend({},b.fn.centerThis.defaults,a);return this.each(function(){var d=b(this),c=
d.find(a.selector),h,g,f,j,i,m=a.marginLeft+a.padding;h=a.marginRight+a.padding;var n=a.marginTop+a.padding;j=a.marginBottom+a.padding;g=c.data("ow");f=c.data("oh");if(!g||!f)g=c.width(),f=c.height();(bw=c.data("bw"))||c.data("bw",bw=parseInt(c.css("border-top-width"))||0);h=(d.width()||b("body").width())-2*bw-m-h;d=(d.height()||b("body").height())-2*bw-n-j;if("IMG"===c[0].nodeName&&a.fit&&(g>h||f>d||a.enlarge))j=Math.min(h/g,d/f),g=Math.round(g*j),f=Math.round(f*j);j=Math.round((h-g)/2)+m;i=Math.round((d-
f)/2)+n;if(a.animate){c.stop(!0,!1);if(a.preScale&&1!==a.preScale){var r=g*a.preScale,k=f*a.preScale;c.css({left:Math.round((h-r)/2)+m,top:Math.round((d-k)/2)+n,width:Math.round(r),height:Math.round(k)})}else a.init&&c.css({left:j,top:i});c.animate({left:j,top:i,width:g,height:f},{duration:a.speed,easing:a.effect,complete:a.complete})}else c.css({left:j,top:i,width:g,height:f}),b.isFunction(a.complete)&&a.complete.call(this)})};b.fn.centerThis.defaults={selector:".main",speed:500,fit:!0,enlarge:!0,
marginTop:0,marginBottom:0,marginLeft:0,marginRight:0,padding:0,init:!1,animate:!1,effect:"swing",complete:null};b.fn.setupShop=function(a){var a=b.extend({},b.fn.setupShop.defaults,a),d;b.fn.addInput=function(a,c,d,j){var i;return this.each(function(){i=b("<input>",{type:d||"text"}).appendTo(b(this));a&&(i.attr("name",a),i.addClass(a));c&&i.val(c);j&&i.prop(j,j)})};b.fn.addSelect=function(a,c,f){return!a.length?this:this.each(function(){var j=b(this),j=b("<select>").appendTo(j);for(d=0;d<a.length;d++)j.append(b("<option>",
{val:a[d].val,text:a[d].key+" ("+c+" "+a[d].val+")"}));b.isFunction(f)&&j.change(f)})};var c=function(a){var a=a.split("::"),b,c=[];for(d=0;d<a.length;d++)b=a[d].split("="),1<b.length&&c.push({key:b[0],val:b[1]});return c};return this.each(function(){var d=b(this),g,f,j;d.readData(a,"gateway,id,currency,handling,options,file");if(!(null==a.id||null==a.options||null==a.file)){id="paypal"==a.gateway?{form:"paypal",seller:"business",currency:"currency_code",title:"item_name",select:"item_number",price:"amount",
copies:"add",shipprice:"shipping",handling:"handling_cart"}:{form:"google_checkout",currency:"item_currency_1",title:"item_name_1",select:"item_description_1",price:"item_price_1",copies:"item_quantity_1",shipmethod:"ship_method_name_1",shipprice:"ship_method_price_1",shipcurrency:"ship_method_currency_1"};var i=c(a.options);a.id=a.id.replace("|","@");var m=function(){var a=g.length?g.children("select").eq(0):!1;if(a&&a.length){var b,a=a.val().split("+");q=g.children("[name=copies]").val()||1;(b=
g.children("[name=total]"))&&b.val((a[0]*q).toFixed(2));(b=f.children("[name="+id.price+"]"))&&b.val(a[0]);(b=f.children("[name="+id.copies+"]"))&&b.val(q);if(b=f.children("[name="+id.shipprice+"]"))b.val(1<a.length?a[1]:0);(b=f.children("[name="+id.select+"]"))&&b.val(g.find("option:selected").text())}};g=b("<form>",{name:"shopping",method:"post"}).appendTo(d);g.addSelect(i,a.currency,m);g.append("x").addInput("copies",1);g.append("=").addInput("total",i[0].val.split("+")[0],"text","readonly");g.children("[name=copies]").css({width:"3em"}).change(m);
g.children("[name=total]").css({width:"5em"});g.append(a.currency);"paypal"===a.gateway?(j=i[0].val.split("+"),f=b("<form>",{name:id.form,target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(d),f.addInput("cmd","_cart","hidden"),f.addInput(id.copies,1,"hidden"),f.addInput(id.seller,a.id,"hidden"),f.addInput(id.price,j[0],"hidden"),f.addInput(id.currency,a.currency,"hidden"),f.addInput(id.shipprice,j[1]&&b.isNumeric(j[1])?j[1]:0,"hidden"),null!=a.handling&&b.isNumeric(a.handling)&&
f.addInput(id.handling,a.handling,"hidden"),f.addInput(id.title,a.file,"hidden"),f.addInput(id.select,i[0].key,"hidden"),f.append(b("<input>",{id:"shopAdd",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_cart_SM.gif",alt:"Add to Cart"})),j=b("<form>",{"class":"view",name:"paypalview",target:a.target,action:"https://www.paypal.com/cgi-bin/webscr/",method:"post"}).appendTo(d),j.addInput("cmd","_cart","hidden"),j.addInput("display",1,"hidden"),j.addInput(id.seller,a.id,"hidden"),
j.append(b("<input>",{id:"shopView",type:"image",name:"submit",src:"https://www.paypal.com/en_US/i/btn/btn_viewcart_SM.gif",alt:"View Cart"}))):"google"===a.gateway&&(m=a.id.match(/(\d+)/)[0],f=b("<form>",{name:id.form,target:a.target,action:"https://checkout.google.com/cws/v2/Merchant/"+m+"/checkoutForm",method:"post","accept-charset":"utf-8"}).appendTo(d),f.addInput(id.title,a.file,"hidden"),f.addInput(id.select,i[0].key,"hidden"),f.addInput(id.copies,1,"hidden"),f.addInput(id.price,i[0].val.split("+")[0],
"hidden"),f.addInput(id.currency,a.currency,"hidden"),null!=a.shipping&&b.isNumeric(a.shipping)&&(f.addInput(id.shipmethod,"normal","hidden"),f.addInput(id.shipprice,a.shipping,"hidden"),f.addInput(id.shipcurrency,a.currency,"hidden")),f.addInput("_charset_","","hidden"),f.append(b("<input>",{id:"shopAdd",type:"image",name:"Google Checkout",alt:"Fast checkout through Google",src:"http://checkout.google.com/buttons/checkout.gif?merchant_id="+m+"&w=160&h=43&style=trans&variant=text&loc=en_US",height:43,
width:160})));f.add(j).find("input[name=submit]").click(function(){window.open("",a.target,"width=960,height=600,scrollbars=yes,resizable=yes,menubar=no,toolbar=no,directories=no,status=no,copyhistory=no")})}})};b.fn.setupShop.defaults={target:"ShoppingCart",currency:"EUR",gateway:"paypal"};var V=function(a){if(null==a)return null;return"string"===typeof a?(a=/^(-?[\d.]+),\s?(-?[\d.]+)$/.exec(a),new google.maps.LatLng(a[1],a[2])):new google.maps.LatLng(a[0],a[1])};b.fn.setupMap=function(a){if(!google||
!google.maps)return this;var a=b.extend({},b.fn.setupMap.defaults,a),d=null==a.markerPath?{}:{icon:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(17,24),new google.maps.Point(0,0),new google.maps.Point(8,24)),shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,24),new google.maps.Point(17,0),new google.maps.Point(8,24)),zIndex:9999},c=null==a.markerPath?{}:{icon:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(17,21),new google.maps.Point(45,3),new google.maps.Point(8,
24)),shadow:new google.maps.MarkerImage(a.markerPath,new google.maps.Size(28,21),new google.maps.Point(62,3),new google.maps.Point(8,24))};return this.each(function(){var h=b(this),g,f,i,m,k;h.readData(a,"type,zoom,map,label,resPath,markers");h.width(h.parents(".cont").width()-30);var n=function(){h.width()&&h.height()&&h.data("fresh")&&(h.width(h.parents(".cont").width()-30),google.maps.event.trigger(i,"resize"),i.setCenter(g),h.data("fresh",!1))};m&&m.length&&m.remove();m=b("<div>").css({position:"absolute",
top:"-9000px",width:h.width(),height:h.height()}).appendTo("body");h.data("fresh",!0).on({adjust:n,destroy:function(){i.getParentNode().removeChild(i);b(window).unbind("resize",n)}});if(a.markers&&a.markers.length&&null!=a.curr)g=a.markers[a.curr].map;else if(a.map)g=V(a.map),f=a.label;else return;setTimeout(function(){var n=new google.maps.Map(m[0],{zoom:a.zoom,center:g,mapTypeId:a.type.toLowerCase()});google.maps.event.addListener(n,"maptypeid_changed",function(){b.fn.setupMap.defaults.type=n.getMapTypeId()});
google.maps.event.addListener(n,"zoom_changed",function(){b.fn.setupMap.defaults.zoom=n.getZoom()});if(a.markers&&1<a.markers.length)for(var k,v,C=Math.min(a.curr+a.range,a.markers.length),u=Math.max(a.curr-a.range,0);u<C;u++)v=a.markers[u],k={position:v.map,map:n,title:v.label,zIndex:u},u==a.curr?k=new google.maps.Marker(b.extend(k,d)):(k=new google.maps.Marker(b.extend(k,c)),jQuery.isFunction(a.click)&&v.link&&(k.link=v.link,google.maps.event.addListener(k,"click",function(){a.click.call(this)})));
else k=new google.maps.Marker(b.extend({position:g,map:n,title:f},d));m.css({top:0}).appendTo(h);i=n},20);b(window).resize(function(){clearTimeout(k);h.data("fresh",!0);k=setTimeout(n,100)})})};b.fn.setupMap.defaults={type:"roadmap",zoom:16,range:30};b.fn.markFoldersNew=function(a){a=b.extend({},b.fn.markFoldersNew.defaults,a);if(a.markNewDays){var d=Math.round((new Date).getTime()/864E5);return this.each(function(){d-parseInt(b(this).data("modified")||0)<=a.markNewDays&&b(this).after(a.newLabel)})}};
b.fn.markFoldersNew.defaults={markNewDays:7,newLabel:"NEW"};b.fn.turtleGallery=function(a,d,c){var a=b.extend({},b.fn.turtleGallery.defaults,a),d=b.extend({},b.fn.turtleGallery.texts,d),c=b.extend({},b.fn.turtleGallery.ids,c),h=a.skipIndex?b(a.helpgall.template(d.help)):b(a.help.template(d.help));if(!a.licensee&&location.protocol.startsWith("http")&&!u("ls")){var g=a.resPath+"/logo.png";setTimeout(function(){img=b(new Image);img.load(function(){var a=b("<div>").css({background:"url("+g+") 10px top no-repeat",
textAlign:"left",minHeight:"60px",paddingLeft:"90px"});a.html("<h3>Turtle skin<h3></h3><p>Unlicensed</p>");a.popupBox();u("ls",!0)}).attr("src",g)},1E3)}for(var f="thumbsOn,infoOn,metaOn,mapOn,shopOn,shareOn,printOn,fitImage".split(","),i=function(b,c){location.protocol.startsWith("file")||u(b,c);a[b]=c},m,k=0;k<f.length;k++)if(m=u(f[k]))a[f[k]]=m;b.support.touch&&(a.preScale=!1);b.fn.setupMap.defaults.zoom=a.mapZoom;b.fn.setupMap.defaults.type=a.mapType;b.fn.setupMap.defaults.markerPath=a.markerPath;
b.fn.addPlayer.defaults.bgcolor=b("body").css("background-color").rgb2hex();b.fn.addPlayer.defaults.fit=a.videoFit;b.fn.addPlayer.defaults.auto=a.videoAuto;b.fn.centerThis.defaults.fit=a.fitImage;b.fn.centerThis.defaults.animate=a.transitions;b.fn.centerThis.defaults.padding=a.fitPadding;b.fn.centerThis.defaults.enlarge=!a.fitShrinkonly;b.fn.centerThis.defaults.selector="."+c.main;for(k in a.shares)b.fn.shareIt.defaults[k]=a.shares[k];b.fn.shareIt.defaults.callTxt=d.checkOutThis;var n=function(b){var d=
b.data(c.caption);return d?d.stripHTML():(b=b.closest("a"))?b.attr("href").replace(RegExp("^"+a.slides+"\\/"),""):""},r='<span class="'+c.newItem+'">'+d.newItem+"</span>",w=Math.round((new Date).getTime()/864E5);return this.each(function(){var g=b(this).find("li > a"),f,m,k,p,u,y,x,B,H,I,J,K,F,M,O,R,L,S,T,U,ba,z=null,D=null,A=0,N,la,ma=b(window).width(),na=b(window).height(),oa=[],Aa=function(c){if(document.activeElement&&"INPUT"===document.activeElement.nodeName||b.isFunction(a.enableKeyboard)&&
!a.enableKeyboard()||b("#modal:visible").length)return!0;c=c?c.keyCode:window.event.keyCode;if(112===c)h.alertBox({width:680});else if(f.is(":visible"))switch(c){case 106:case 179:N?P():Y();break;case 109:a.infoOn||a.thumbsOn?(pa(),qa()):(ra(),sa());break;case 107:a.fitImage?ta():ua();break;case 27:Z();break;case 103:case 36:E(0);break;case 37:ca();break;case 39:Q();break;case 97:case 35:E(g.length-1);break;default:return!0}else switch(c){case 13:case 10:E();break;case 103:case 36:A=0;X();break;case 37:A=
(A?A:g.length)-1;X();break;case 39:A=(A+1)%g.length;X();break;case 97:case 35:A=g.length-1;X();break;default:return!0}return!1},ha=function(){window.location.href=a.uplink||"../"},Z=function(){var c=b("[role=main]");f.is(":visible")&&(P(),a.skipIndex?ha():(c.length&&c.is(":hidden")&&(c.children().andSelf().css({visibility:"visible",display:"block"}),c.find(".folders>ul>li").equalHeight(),c.find(".thumbs>ul>li p").length&&c.find(".thumbs>ul>li").equalHeight(),c.find("[role=scroll]").trigger("adjust")),
a.transitions?f.fadeOut(a.speed):f.hide(),"no"!==a.hash&&b.history.load("")));c.find("[role=scroll]").data("dragOn",!1)},Ba=function(a){var b;if(null==a)b=A;else if("number"===typeof a)b=Math.minMax(0,a,g.length);else if(0>(b=g.index(a)))b=S.index(a);return b},Ca=function(a){var b,c;for(b=0;b<g.length;b++)if((c=g.eq(b).attr("href"))&&c.substring(c.lastIndexOf("/")+1)===a)return b;return-1},va=function(){var a=g.eq(A).attr("href");return a&&a.substr(a.lastIndexOf("/")+1)},X=function(){g.filter("."+
c.active).removeClass(c.active);g.eq(A).addClass(c.active);S.eq(A).trigger("setactive")},ca=function(){P();A?E(A-1):"startover"===a.afterLast?E(g.length-1):z.find("img."+c.main).trigger("dragcancel")},Q=function(){if(A<g.length-1)ia(),E(A+1);else if("startover"===a.afterLast||N&&a.slideshowLoop)ia(),E(0);else{if("onelevelup"===a.afterLast){if(a.uplink){ha();return}}else if("backtoindex"===a.afterLast){if(!a.skipIndex){Z();return}}else if("ask"===a.afterLast){P();var f=Array({t:d.startOver,h:function(){E(0)}});
a.uplink&&f.push({t:0<a.level?d.upOneLevel:d.backToHome,h:function(){ha()}});a.skipIndex||f.push({t:d.backToIndex,h:function(){Z()}});b("<h4>"+d.atLastPage+"</h4><p>"+d.atLastPageQuestion+"</p>").alertBox(f)}z.find("img."+c.main).trigger("dragcancel")}},ia=function(){N&&(clearInterval(N),N=setInterval(Q,a.slideshowDelay))},Y=function(){y.hide();x.showin();N=setInterval(Q,a.slideshowDelay)},P=function(){x.hide();y.showin();N=clearInterval(N)},wa=function(){U||(p.stop(!0,!1).css({opacity:0.7}).fadeIn(500,
function(){b.support.cssFilter&&p.css("filter","")}),ba=setTimeout(function(){da()},3E3))},da=function(){U?ba=setTimeout(function(){da()},1E3):(ba=clearTimeout(ba),p.fadeOut(1E3))},pa=function(){a.infoOn&&(B.hide(),H.showin(),a.transitions?u.animate({bottom:-u.outerHeight()},500,function(){u.hide()}):u.css({bottom:-u.outerHeight()}).hide(),i("infoOn",!1))},ra=function(){if(!a.infoOn){H.hide();B.showin();u.is(":hidden")&&u.show().css({bottom:-u.outerHeight()});var b=function(){u.children("."+c.map).trigger("adjust")};
a.transitions?u.animate({bottom:0},500,b):(u.show().css({bottom:0}),b());i("infoOn",!0)}},qa=function(){a.thumbsOn&&(I.hide(),J.showin(),a.transitions?k.animate({top:-L.outerHeight()-10},500):k.css({top:-L.outerHeight()-10}),z&&a.fitFreespace&&z.centerThis({fit:a.fitImage,marginTop:0}),i("thumbsOn",!1))},sa=function(){a.thumbsOn||(J.hide(),I.showin(),a.transitions?k.animate({top:0},500):k.css({top:0}),z&&a.fitFreespace&&z.centerThis({fit:a.fitImage,marginTop:L.outerHeight()}),i("thumbsOn",!0))},aa=
function(){return a.fitFreespace&&0<=k.position().top?L.outerHeight()||0:0},ta=function(){K.hide();F.showin();z.centerThis({fit:!1,marginTop:aa()});i("fitImage",!1)},ua=function(){F.hide();K.showin();z.centerThis({fit:!0,marginTop:aa()});i("fitImage",!0)},xa=function(a){if(!(0>a||a>=g.length)){var d=g.eq(a).children("img").eq(0);!d.data(c.isvideo)&&!d.data(c.isother)&&!d.data("cached")&&(s=d.data(c.src))&&b("<img>").load(function(){d.data("cached",!0)}).attr({src:s})}},ea=function(a){a.trigger("destroy");
a.find("."+c.share+"-"+c.icon).trigger("destroy");a.find("."+c.map).trigger("destroy")},E=function(h){f.is(":hidden")&&(a.transitions?f.fadeIn(a.speed):f.show());h=Ba(h);if(!(h===A&&z)){var i,j=g.eq(h),k,n,j=j.children("img").eq(0);if(j.length){z&&(D&&D.length&&(D.stop(),ea(D),D.remove()),D=z,D.css({zIndex:0}),D.find("."+c.main).trigger("unswipe").off("touchstart"),D.unmousewheel());(i=f.children("."+c.img).not(z)).length&&i.stop().remove();var p;z=b("<div>",{"class":c.img}).css({zIndex:1,display:"none"}).appendTo(f);
m.css({opacity:0,display:"block"}).animate({opacity:1});A=h;X();if(j.data(c.isother)||!(k=j.data(c.src)))n=j.clone(),i=b("<div>",{"class":c.main+" "+c.other}),i.append(b("<a>",{href:j.data(c.link),target:"_blank"})),i.append(b("<p>",{text:d.clickToOpen})),i.children("a:first").append(n),ja(i);else if(j.data(c.isvideo)||j.data(c.isaudio)){var u=N;u&&P();if(j.data(c.isvideo)){k=f.width()-40;var r=f.height()-40;i=j.data(c.width);p=j.data(c.height);if(i>k||p>r)k=Math.min(k/i,r/p),i*=k,p*=k}else i=Math.max(280,
j.attr("width")||0),p=Math.max(128,j.attr("height")||0);k=b("<div>",{"class":c.main+" "+c.other}).css({width:i,height:p});el=k.addPlayer({complete:function(){u&&(Q(),Y())},file:j.data(c.link),resPath:a.resPath,poster:j.attr("src"),auto:a.videoAuto,fit:a.videoFit,width:i,height:p});k.data("media",el);ja(k)}else n=b(new Image),i=j.data(c.width),p=j.data(c.height),n.addClass(c.main).load(function(){j.data("cached",!0);ja(n)}).attr({src:k,width:i||"auto",height:p||"auto"}).data({ow:i,oh:p});Da(j,h)}}},
ja=function(d){if(a.transitions){if(m.stop(!0,!1).animate({opacity:0},{duration:100,complete:function(){b(this).hide()}}),D){var g=D;D.stop(!0,!1).animate({opacity:0},{duration:a.speed/2,complete:function(){ea(g);g.remove()}});D=null}}else m.hide(),D&&(D.stop(),ea(D),D.remove());var f=d[0]&&"IMG"===d[0].nodeName;z.children().not("."+c.bottom).remove();z.append(d);if(a.rightClickProtect)d.on("contextmenu",function(a){a.preventDefault();return!1});a.enableMouseWheel&&z.mousewheel(function(a,b){0<b?
ca():Q();return!1});setTimeout(function(){if(b.support.touch)d.on("touchstart",function(){wa()});else f&&d.click(function(){Q()});d.addSwipe(function(){b(this).trigger("unswipe");Q()},function(){b(this).trigger("unswipe");ca()})},a.speed/2);a.transitions?z.css({opacity:0,display:"block"}).animate({opacity:1},{duration:a.speed,complete:b.browser.cssFilter?function(){z.css({filter:""})}:null}).centerThis({init:!0,speed:Math.round(0.75*a.speed),marginTop:aa(),preScale:f&&a.preScale,animate:f&&a.preScale&&
1!=a.preScale,fit:f&&a.fitImage}):z.show().centerThis({init:!0,marginTop:aa(),fit:f&&a.fitImage});xa(A+1);xa(A-1);if("number"===a.hash)b.history.load(A+1);else if("fileName"===a.hash){var h=va();h&&b.history.load(h)}},Da=function(f,h){u=b("<div>",{"class":c.bottom});var k=b("<div>",{"class":c.cont}).appendTo(u),m=b("<nav>").appendTo(k),p,r;a.showImageNumbers&&k.append('<div class="nr"><strong>'+(h+1)+"</strong> / "+g.length+"</div>");(p=f.data(c.caption))&&k.append(p);for(var y,x,w,C=[c.meta,c.map,
c.shop,c.share,c.print,c.comment],B=0;B<C.length;B++)w=C[B],null!=f.data(w)&&(x=b("<div>",{"class":c.panel+" "+c[w]}).data("rel",w).appendTo(k),x.append(b("<div>",{"class":c.icon})),y=b("<a>",{href:NOLINK,"class":w+"-"+c.icon,text:" "}).appendTo(m),y.data("rel",w).addHint(d[w+"Btn"]||w),y.click(function(){var d=b(this).data("rel"),g=k.children("."+d);o=g.is(":hidden");b(this).toggleClass(c.active,o);if(d===c.map){var f=function(){g.children("."+c.mapcont).trigger("adjust")};a.transitions?g.slideToggle("fast",
f):(g.toggle(),setTimeout(f,50))}else a.transitions?g.slideToggle("fast"):g.toggle();i(d+"On",o)}));if(p=f.data(c.link))y=b("<a>",{href:p,"class":c.link+"-"+c.icon,target:"_blank",text:" "}).appendTo(m),y.addHint((f.data(c.isoriginal)?d.original:d.hiRes)+"<p><small>"+d.saveTip+"</small></p>");if(a.shareOn){var D=b("<a>",{href:NOLINK,"class":c.share+"-"+c.icon,text:" "}).appendTo(m);r="number"===a.hash?A+1:va();setTimeout(function(){D.shareIt({hash:r})},a.speed)}z.append(u);k.children("."+c.panel).each(function(){x=
b(this);if((w=x.data("rel"))&&null!=(p=f.data(w))){if(w===c.map){var d=b("<div>",{"class":c.mapcont}).appendTo(x);a.mapAll?d.setupMap({click:function(){E(this.link)},markers:oa,curr:parseInt(f.data(c.mapid))}):d.setupMap({map:p,label:n(f)})}else w===c.shop?x.addClass("clearfix").setupShop({file:f.attr("src").replace("thumbs/",""),gateway:a.shopGateway,id:a.shopId,currency:a.shopCurrency,handling:a.shopHandling,options:p}):x.append(p);a[w+"On"]?m.children("a."+w+"-icon").addClass(c.active):x.hide()}});
m.html().length||m.remove();a.infoOn||u.hide()};if(g.length){(function(){if(null!=a.header){var g=b(a.header);if(g.length){var f=b("<div>",{"class":c.startBtn,text:" "}).appendTo(g),i=b("<div>",{"class":c.startTxt,text:d.startSlideshow}).appendTo(g);f.mouseenter(function(){i.stop(!0,!1).css({opacity:1}).hide().fadeIn(250)}).mouseleave(function(){i.stop(!0,!1).fadeOut(500)}).click(function(){E();Y();return!1});f=g.find("."+c.parent+">a");f.length&&(a.uplink=f.attr("href"));b("[role=main]").find("a."+
c.help).click(function(){h.alertBox({width:680})})}}})();f=b("<div>",{"class":c.gallery}).appendTo("body");m=b("<div>",{"class":c.wait}).appendTo(f);k=b("<div>",{"class":c.navigation}).appendTo(f);L=function(d){var f,h,i,j,k,m=0;e=b("<div>",{"class":c.scrollbox}).appendTo(d);tc=b("<div>",{"class":"wrap"}).appendTo(e);re=RegExp("^"+a.slides+"\\/");tc=b("<ul>",{"class":c.cont}).appendTo(tc);g.each(function(n){d=b(this);j=d.find("img").eq(0);k=d.attr("href");j.length&&k&&(h=b("<a>",{href:NOLINK}).appendTo(b("<li>").appendTo(tc)),
i=b("<img>").appendTo(h),j.data(c.src,k),j.attr("src").endsWith("/"+a.loadImg)?j.add(i).attr("src",a.thumbs+"/"+k.replace(re,"")):i.attr("src",j.attr("src")),(f=d.attr("title"))&&f.length?d.add(h).addHint(f):(f=d.next(),f.length&&h.addHint(f.html())),a.markNewDays&&w-parseInt(j.data(c.modified)||0)<=a.markNewDays&&d.add(h).append(r),d.click(function(){if(!0===b(this).parents("[role=scroll]").data("dragOn"))return!1;!b(this).hasClass(c.active)&&z&&z.length&&(z.stop(),ea(z),z.remove());E(g.eq(n));return!1}),
h.click(function(){if(!0===b(this).parents("[role=scroll]").data("dragOn"))return!1;b(this).hasClass(c.active)||E(g.eq(n));b(this).trigger("active");return!1}),m+=h.outerWidth(!0))});tc.width(m).scrollThumbs({enableMouseWheel:a.enableMouseWheel});return e}(k);S=L.find(".cont a");p=function(f){f=b("<nav>",{"class":"controls clearfix"}).appendTo(f);M=b("<a>",{"class":c.prev,title:d.previousPicture}).appendTo(f);M.click(function(){P();ca();return!1});O=b("<a>",{"class":c.up,title:a.skipIndex?d.upOneLevel:
d.backToIndex}).appendTo(f);O.click(function(){P();Z();return!1});K=b("<a>",{"class":c.noresize,title:d.oneToOneSize}).appendTo(f);K.click(function(){ta();return!1});F=b("<a>",{"class":c.resize,title:d.fitToScreen}).appendTo(f);F.click(function(){ua();return!1});a.fitImage?(F.hide(),K.showin()):(K.hide(),F.showin());B=b("<a>",{"class":c.hideInfo,title:d.hideInfo}).appendTo(f);B.click(function(){pa();return!1});H=b("<a>",{"class":c.showInfo,title:d.showInfo}).appendTo(f);H.click(function(){ra();return!1});
a.infoOn?(H.hide(),B.showin()):(B.hide(),H.showin());I=b("<a>",{"class":c.hideThumbs,title:d.hideThumbs}).appendTo(f);I.click(function(){qa();return!1});J=b("<a>",{"class":c.showThumbs,title:d.showThumbs}).appendTo(f);J.click(function(){sa();return!1});a.thumbsOn?(J.hide(),I.showin()):(I.hide(),J.showin());y=b("<a>",{"class":c.play,title:d.startAutoplay}).appendTo(f);y.click(function(){da();Y();return!1});x=b("<a>",{"class":c.pause,title:d.stopAutoplay}).appendTo(f);x.click(function(){P();return!1});
a.slideshowAuto?(y.hide(),x.showin()):(x.hide(),y.showin());R=b("<a>",{"class":c.next,title:d.nextPicture}).appendTo(f);R.click(function(){ia();Q();return!1});var g=0;f.children().each(function(){"none"!==b(this).css("display")&&(g+=b(this).outerWidth())});f.width(g);f.children("a").addHint();return f}(k);a.thumbsOn||k.css("top",-L.outerHeight()-10);L.mouseenter(function(){da();T=!0}).mouseleave(function(){T=!1});p.mouseenter(function(){U=!0;b(this).stop(!0,!1).fadeTo(200,1)}).mouseleave(function(){U=
!1;b(this).stop(!0,!1).fadeTo(200,0.7)});var ya=0,za=0;b.support.touch||f.mousemove(function(a){if(!T&&(ya-a.clientY||za-a.clientX))wa(),za=a.clientX,ya=a.clientY});if(a.mapAll){var fa,ga,ka;g.each(function(a){fa=b(this).find("img:first");if(fa.length&&(ga=fa.data("map"))&&(ga=V(ga)))ka=n(fa),oa.push({map:ga,label:a+1+(ka?": "+ka.stripHTML():""),link:b(this)})})}!b.support.touch&&(b.isFunction(a.enableKeyboard)||a.enableKeyboard)&&b(document).keydown(Aa);a.hash&&"no"!==a.hash&&b.history.init(function(c){c&&
c.length?(c="number"===a.hash?(parseInt(c)||1)-1:Ca(c),E(c),a.slideshowAuto=!1):(Z(),b.browser.msie&&setTimeout(function(){b("[role=main]").show();b(".folders>ul>li").equalHeight();b("[role=scroll]").trigger("adjust")},10))});X(A);a.slideshowAuto?(E(A),Y()):a.skipIndex&&E(A);b(window).resize(function(){clearTimeout(la);la=setTimeout(function(){var c=b(window).width(),d=b(window).height();if(c!==ma||d!==na)z&&z.centerThis({fit:a.fitImage,marginTop:aa()}),ma=c,na=d},100)})}})};b.fn.turtleGallery.defaults=
{hash:"fileName",resPath:"",relPath:"",level:0,skipIndex:!1,speed:600,transitions:!0,preScale:0.95,slideshowDelay:3E3,slideshowLoop:!1,slideshowAuto:!1,markNewDays:30,afterLast:"ask",infoOn:!0,showImageNumbers:!0,thumbsOn:!1,fitImage:!0,fitShrinkonly:!0,fitFreespace:!0,fitPadding:15,borderWidth:10,rightClickProtect:!1,metaOn:!1,mapOn:!1,shopOn:!1,shareOn:!1,printOn:!1,enableKeyboard:!0,enableMouseWheel:!0,numberLinks:!1,videoAuto:!0,videoFit:!0,videoWidth:640,videoHeight:480,controlbarHeight:24,help:'<h2>{0}</h2><ul class="help index"><li><span>1</span>{1}</li><li><span>2</span>{2}</li><li><span>3</span>{3}</li><li><span>4</span>{4}</li><li><span>5</span>{5}</li><li><span>6</span>{6}</li></ul><hr><ul class="help gall"><li><span>1</span>{7}</li><li><span>2</span>{8}</li><li><span>3</span>{9}</li><li><span>4</span>{10}</li><li><span>5</span>{11}</li><li><span>6</span>{12}</li><li><span>7</span>{13}</li></ul><p>{14}</p>',
helpgall:'<h2>{0}</h2><ul class="help gall"><li><span>1</span>{7}</li><li><span>2</span>{8}</li><li><span>3</span>{9}</li><li><span>4</span>{10}</li><li><span>5</span>{11}</li><li><span>6</span>{12}</li><li><span>7</span>{13}</li></ul><p>{14}</p>'};b.fn.turtleGallery.texts={startSlideshow:"Start slideshow",close:"Close",atLastPage:"At last page",atLastPageQuestion:"Where to go next?",startOver:"Start over",backToHome:"Back to home",stop:"Stop",upOneLevel:"Up one level",backToIndex:"Back to index page",
previousPicture:"Previous picture",nextPicture:"Next picture",oneToOneSize:"1:1 size",fitToScreen:"Fit to screen",showInfo:"Show caption / info",hideInfo:"Hide caption / info",showThumbs:"Show thumbnails",hideThumbs:"Hide thumbnails",startAutoplay:"Start autoplay",stopAutoplay:"Stop autoplay",closeWindow:"Close window",clickToOpen:"Click to open this document with the associated viewer",download:"Download",original:"Original",hiRes:"Hi res.",saveTip:"Use Right click -> Save link as... to download",
metaBtn:"Photo data",metaLabel:"Display photograpic (Exif/Iptc) data",mapBtn:"Map",mapLabel:"Show the photo location on map",shopBtn:"Buy",shopLabel:"Show options to buy this item",shareBtn:"Share",shareLabel:"Share this photo over social sites",help:"Using Turtle gallery,Top <b>navigation</b> bar with <b>Home</b> button,<b>Up</b> one level <em>Up arrow</em>,Author or company <b>information</b>,<b>Share</b> and <b>Like</b> buttons for social networking,<b>Search</b> button,Start slideshow <em>Numpad *</em>,Previous image <em>Left arrow</em>,Back to index page <em>Esc</em>,Toggle zoom (fit/1:1) <em>Numpad +</em>,Toggle info window <em>Numpad -</em>,Toggle thumbnail scoller,Start / Stop slideshow <em>Numpad *</em>,Next image <em>Right arrow</em>,Swipe for previous / next image".split(",")};
b.fn.turtleGallery.ids={gallery:"gallery",navigation:"navigation",scrollbox:"scrollbox",active:"active",parent:"parent",bottom:"bottom",img:"img",main:"main",video:"video",audio:"audio",other:"other",wait:"wait",cont:"cont",panel:"panel",icon:"icon",caption:"caption",meta:"meta",map:"map",mapcont:"mapcont",mapid:"mapid",shop:"shop",share:"share",print:"print",comment:"comment",link:"link",isoriginal:"isoriginal",width:"width",height:"height",src:"src",isvideo:"isvideo",isaudio:"isaudio",isother:"isother",
modified:"modified",startBtn:"startbtn",startTxt:"starttxt",prev:"prev",next:"next",up:"up",noresize:"noresize",resize:"resize",hideInfo:"hideinfo",showInfo:"showinfo",hideThumbs:"hidethumbs",showThumbs:"showthumbs",play:"play",pause:"pause",help:"helpbtn",newItem:"newlabel",showHint:"showhint"}})(jQuery);
